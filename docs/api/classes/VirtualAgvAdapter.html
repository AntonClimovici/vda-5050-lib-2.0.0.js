<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>VirtualAgvAdapter | vda-5050-lib for VDA 5050 version 1.1 - v1.2.0</title><meta name="description" content="Documentation for vda-5050-lib for VDA 5050 version 1.1 - v1.2.0"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">vda-5050-lib for VDA 5050 version 1.1 - v1.2.0</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../index.html">vda-5050-lib for VDA 5050 version 1.1 - v1.2.0</a></li><li><a href="VirtualAgvAdapter.html">VirtualAgvAdapter</a></li></ul><h1>Class VirtualAgvAdapter</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>An AGV adapter that implements a virtual AGV supporting free autonomous
navigation along edges, and a basic, yet extensible set of actions.</p>
</div><div><p>This adapter is meant to be used as a template for realizing your own
adapter, for simulation purposes, integration testing, and in other kind of
environments where real AGVs are not available or must be mocked.</p>
<p>The following actions are supported:</p>
<ul>
<li>noop [instant, node, edge]</li>
<li>pick/drop [node],</li>
<li>initPosition [instant, node]</li>
<li>startPause/stopPause [instant]</li>
<li>startCharging/stopCharging [instant, node]</li>
<li>cancelOrder [instant, supported by AgvController]</li>
<li>stateRequest [instant, supported by AgvController]</li>
<li>orderExecutionTime [instant (custom)]</li>
</ul>
<p>The actions noop, pick, drop, startCharging, and stopCharging accept an
optional action parameter named &quot;duration&quot; that specifies the number of
seconds to stay in action state RUNNING. If not specified all these actions
stay running for 5 seconds. Note that pick and drop actions stay in status
INITIALIZING for 1 additional second.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>To be executable by the virtual AGV an order must specify
<code>nodePosition</code> for all nodes except for the first one as VDA 5050 requires
the vehicle to be already positioned on the first node (within a given
deviation range). The property <code>nodeId</code> alone is not usable as a symbolic
position.</p>
</dd><dt>remarks</dt><dd><p>On initialization, the virtual AGV is positioned at <code>{ x: 0, y: 0, theta: 0}</code> relative to a map with mapId <code>local</code>. You can override or reset
this pose using the instant or node action <code>initPosition</code>, specifying <code>x</code>,
<code>y</code>, <code>theta</code>, <code>mapId</code>, <code>lastNodeId</code>, and <code>lastNodeSequenceId</code> (optional,
defaults to
0) as action parameters.</p>
</dd><dt>remarks</dt><dd><p>The virtual AGV provides a constant safety state where no e-stop is
activated and where the protective field is never violated. The operating
mode of the virtual AGV is always automatic, i.e. it is fully controlled by
master control.</p>
</dd><dt>remarks</dt><dd><p>The virtual AGV can only pick and carry one load at a time. Before
picking another load the current load must have been dropped.</p>
</dd><dt>remarks</dt><dd><p>A charging action is executed on a charging spot while the vehicle
is standing, either as an instant action or as a node action. Charging mode
is either terminated explicitely by action stopCharging or automatically when
the battery is fully charged.</p>
</dd><dt>remarks</dt><dd><p>The AGV&#39;s remaining battery reach is reported in the
<code>State.batteryState</code> property unless the vehicle time distribution mode is
active according to the option <code>vehicleTimeDistribution</code>. When the AGV&#39;s
battery runs low according to the option <code>lowBatteryChargeThreshold</code> it stops
driving and reports an error of type <code>&quot;batteryLowError&quot;</code>. The master control
must then initiate further actions, e.g. cancel any active order or start
charging. The battery low error is removed from State as soon as battery
charge advances 10% above the configured threshold.</p>
</dd><dt>remarks</dt><dd><p>The custom action <code>orderExecutionTime</code> expects an action parameter
key <code>orders</code> with an array of VDA 5050 headerless Order objects as parameter
value. The action finishes immediately reporting the estimated order
execution times in seconds as values in a comma-separated string format via
the <code>resultDescription</code> of the corresponding action state. The calculated
estimates include the effective duration of action processing on the order&#39;s
nodes (taking action blocking types and concurrent actions into account) as
well as the travel time on the order&#39;s edges, including both base and horizon
nodes and edges.</p>
</dd><dt>remarks</dt><dd><p>To support benchmarking and performance measurement based on
statistics the virtual AGV also supports probabilistic distribution of
driving speed or driving time by corresponding adapter options.</p>
</dd></dl></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">VirtualAgvAdapter</span></li></ul></section><section class="tsd-panel"><h3>Implements</h3><ul class="tsd-hierarchy"><li><a href="../interfaces/AgvAdapter.html" class="tsd-signature-type" data-tsd-kind="Interface">AgvAdapter</a></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Constructors</h3><ul class="tsd-index-list"><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#constructor" class="tsd-kind-icon">constructor</a></li></ul></section><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#debug" class="tsd-kind-icon">debug</a></li></ul></section><section class="tsd-index-section "><h3>Accessors</h3><ul class="tsd-index-list"><li class="tsd-kind-get-signature tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#actionDefinitions" class="tsd-kind-icon">action<wbr/>Definitions</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#apiVersion" class="tsd-kind-icon">api<wbr/>Version</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#controller" class="tsd-kind-icon">controller</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#name" class="tsd-kind-icon">name</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#options" class="tsd-kind-icon">options</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#vehicleState" class="tsd-kind-icon">vehicle<wbr/>State</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#attach" class="tsd-kind-icon">attach</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#canExecuteOrder" class="tsd-kind-icon">can<wbr/>Execute<wbr/>Order</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#cancelAction" class="tsd-kind-icon">cancel<wbr/>Action</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#detach" class="tsd-kind-icon">detach</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#executeAction" class="tsd-kind-icon">execute<wbr/>Action</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#finishEdgeAction" class="tsd-kind-icon">finish<wbr/>Edge<wbr/>Action</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#getBatteryReach" class="tsd-kind-icon">get<wbr/>Battery<wbr/>Reach</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#getNodeActionDuration" class="tsd-kind-icon">get<wbr/>Node<wbr/>Action<wbr/>Duration</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#getTargetSpeed" class="tsd-kind-icon">get<wbr/>Target<wbr/>Speed</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#isActionExecutable" class="tsd-kind-icon">is<wbr/>Action<wbr/>Executable</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#isNodeWithinDeviationRange" class="tsd-kind-icon">is<wbr/>Node<wbr/>Within<wbr/>Deviation<wbr/>Range</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#isRouteTraversable" class="tsd-kind-icon">is<wbr/>Route<wbr/>Traversable</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#startDriving" class="tsd-kind-icon">start<wbr/>Driving</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#stopDriving" class="tsd-kind-icon">stop<wbr/>Driving</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#stopTraverse" class="tsd-kind-icon">stop<wbr/>Traverse</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#traverseEdge" class="tsd-kind-icon">traverse<wbr/>Edge</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#updateBatteryState" class="tsd-kind-icon">update<wbr/>Battery<wbr/>State</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Constructors</h2><section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class"><a id="constructor" class="tsd-anchor"></a><h3>constructor</h3><ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">new <wbr/>Virtual<wbr/>Agv<wbr/>Adapter<span class="tsd-signature-symbol">(</span>controller<span class="tsd-signature-symbol">: </span><a href="AgvController.html" class="tsd-signature-type" data-tsd-kind="Class">AgvController</a>, adapterOptions<span class="tsd-signature-symbol">: </span><a href="../interfaces/VirtualAgvAdapterOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">VirtualAgvAdapterOptions</a>, debug<span class="tsd-signature-symbol">: </span><a href="../index.html#AgvAdapterDebugger" class="tsd-signature-type" data-tsd-kind="Type alias">AgvAdapterDebugger</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="VirtualAgvAdapter.html" class="tsd-signature-type" data-tsd-kind="Class">VirtualAgvAdapter</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L510">adapter/virtual-agv-adapter.ts:510</a></li></ul></aside><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>controller: <a href="AgvController.html" class="tsd-signature-type" data-tsd-kind="Class">AgvController</a></h5></li><li><h5>adapterOptions: <a href="../interfaces/VirtualAgvAdapterOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">VirtualAgvAdapterOptions</a></h5></li><li><h5>debug: <a href="../index.html#AgvAdapterDebugger" class="tsd-signature-type" data-tsd-kind="Type alias">AgvAdapterDebugger</a></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="VirtualAgvAdapter.html" class="tsd-signature-type" data-tsd-kind="Class">VirtualAgvAdapter</a></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="debug" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagReadonly">Readonly</span> debug</h3><div class="tsd-signature tsd-kind-icon">debug<span class="tsd-signature-symbol">:</span> <a href="../index.html#AgvAdapterDebugger" class="tsd-signature-type" data-tsd-kind="Type alias">AgvAdapterDebugger</a></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Accessors</h2><section class="tsd-panel tsd-member tsd-kind-get-signature tsd-parent-kind-class tsd-is-protected"><a id="actionDefinitions" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagProtected">Protected</span> action<wbr/>Definitions</h3><ul class="tsd-signatures tsd-kind-get-signature tsd-parent-kind-class tsd-is-protected"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">get</span> actionDefinitions<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../interfaces/VirtualActionDefinition.html" class="tsd-signature-type" data-tsd-kind="Interface">VirtualActionDefinition</a><span class="tsd-signature-symbol">[]</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L739">adapter/virtual-agv-adapter.ts:739</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Gets the default set of action definitions supported by the virtual AGV.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>Can be overwritten or extended by subclasses.</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <a href="../interfaces/VirtualActionDefinition.html" class="tsd-signature-type" data-tsd-kind="Interface">VirtualActionDefinition</a><span class="tsd-signature-symbol">[]</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-get-signature tsd-parent-kind-class"><a id="apiVersion" class="tsd-anchor"></a><h3>api<wbr/>Version</h3><ul class="tsd-signatures tsd-kind-get-signature tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">get</span> apiVersion<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#apiVersion">apiVersion</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L539">adapter/virtual-agv-adapter.ts:539</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Defines the protocol version number of this adapter, a positive integer.</p>
</div><div><p>Increment this version whenever you make changes to the adapter protocol.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>The API version of this adapter must match (i.e. equal) the API
version of the associated AGV controller. If both versions differ, an
error is thrown when the adapter is instantiated.</p>
</dd></dl></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">number</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-get-signature tsd-parent-kind-class"><a id="controller" class="tsd-anchor"></a><h3>controller</h3><ul class="tsd-signatures tsd-kind-get-signature tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">get</span> controller<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="AgvController.html" class="tsd-signature-type" data-tsd-kind="Class">AgvController</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#controller">controller</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L531">adapter/virtual-agv-adapter.ts:531</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The AGV controller this adapter is associated with.</p>
</div><div><p>Used to invoke state update methods defined by the AGV controller.</p>
</div></div><h4 class="tsd-returns-title">Returns <a href="AgvController.html" class="tsd-signature-type" data-tsd-kind="Class">AgvController</a></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-get-signature tsd-parent-kind-class"><a id="name" class="tsd-anchor"></a><h3>name</h3><ul class="tsd-signatures tsd-kind-get-signature tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">get</span> name<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#name">name</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L535">adapter/virtual-agv-adapter.ts:535</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Defines the name of this adapter used for identification and display
purposes.</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">string</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-get-signature tsd-parent-kind-class"><a id="options" class="tsd-anchor"></a><h3>options</h3><ul class="tsd-signatures tsd-kind-get-signature tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">get</span> options<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Readonly</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">Required</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/VirtualAgvAdapterOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">VirtualAgvAdapterOptions</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L525">adapter/virtual-agv-adapter.ts:525</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Gets the Virtual AGV adapter configuration options as a readonly object
with default values filled in for options not specified in the
configuration.</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Readonly</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">Required</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/VirtualAgvAdapterOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">VirtualAgvAdapterOptions</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-get-signature tsd-parent-kind-class tsd-is-protected"><a id="vehicleState" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagProtected">Protected</span> vehicle<wbr/>State</h3><ul class="tsd-signatures tsd-kind-get-signature tsd-parent-kind-class tsd-is-protected"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">get</span> vehicleState<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Readonly</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/VirtualAgvState.html" class="tsd-signature-type" data-tsd-kind="Interface">VirtualAgvState</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L730">adapter/virtual-agv-adapter.ts:730</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Gets the vehicle state as a readonly object.</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Readonly</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/VirtualAgvState.html" class="tsd-signature-type" data-tsd-kind="Interface">VirtualAgvState</a><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="attach" class="tsd-anchor"></a><h3>attach</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">attach<span class="tsd-signature-symbol">(</span>context<span class="tsd-signature-symbol">: </span><a href="../interfaces/AttachContext.html" class="tsd-signature-type" data-tsd-kind="Interface">AttachContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#attach">attach</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L543">adapter/virtual-agv-adapter.ts:543</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Registers a handler that is invoked once by the associated controller
when the adapter should perform initializations and connect to the AGV
navigation &amp; control interface.</p>
</div><div><p>The handler function should compute initial vehicles states and report
them back to the controller after initialization is complete through the
callback <code>AttachContext.attached</code>. Until this callback is invoked, the
controller won&#39;t invoke any of the other handler functions defined in
this interface.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>context: <a href="../interfaces/AttachContext.html" class="tsd-signature-type" data-tsd-kind="Interface">AttachContext</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a id="canExecuteOrder" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagProtected">Protected</span> can<wbr/>Execute<wbr/>Order</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-protected"><li class="tsd-signature tsd-kind-icon">can<wbr/>Execute<wbr/>Order<span class="tsd-signature-symbol">(</span>nodes<span class="tsd-signature-symbol">: </span><a href="../interfaces/Node.html" class="tsd-signature-type" data-tsd-kind="Interface">Node</a><span class="tsd-signature-symbol">[]</span>, edges<span class="tsd-signature-symbol">: </span><a href="../interfaces/Edge.html" class="tsd-signature-type" data-tsd-kind="Interface">Edge</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">boolean</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L1073">adapter/virtual-agv-adapter.ts:1073</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Determines whether the given order could be executed potentially by
checking whether the order route is traversable and all node actions are
potentially executable.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>nodes: <a href="../interfaces/Node.html" class="tsd-signature-type" data-tsd-kind="Interface">Node</a><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>nodes of order</p>
</div></div></li><li><h5>edges: <a href="../interfaces/Edge.html" class="tsd-signature-type" data-tsd-kind="Interface">Edge</a><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>edges of order</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">boolean</span></h4><div><p>true if order can be executed potentially; false otherwise</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="cancelAction" class="tsd-anchor"></a><h3>cancel<wbr/>Action</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">cancel<wbr/>Action<span class="tsd-signature-symbol">(</span>context<span class="tsd-signature-symbol">: </span><a href="../interfaces/ActionContext.html" class="tsd-signature-type" data-tsd-kind="Interface">ActionContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#cancelAction">cancelAction</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L622">adapter/virtual-agv-adapter.ts:622</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Registers a handler that is invoked by the associated controller whenever
a not yet finished or failed node or edge action of an active order is to
be canceled.</p>
</div><div><p>If the action cannot be interrupted it should continue running until
finished or failed. If the action can be interrupted it should be
canceled and action status FAILED should be reported via
<code>context.updateActionStatus</code>.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>This handler function is only invoked for node and edge actions
previously scheduled by the <code>executeAction</code> handler and not yet finished
or failed, i.e. for actions that are either in status INITIALIZING,
RUNNING, or PAUSED.</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>context: <a href="../interfaces/ActionContext.html" class="tsd-signature-type" data-tsd-kind="Interface">ActionContext</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="detach" class="tsd-anchor"></a><h3>detach</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">detach<span class="tsd-signature-symbol">(</span>context<span class="tsd-signature-symbol">: </span><a href="../interfaces/DetachContext.html" class="tsd-signature-type" data-tsd-kind="Interface">DetachContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#detach">detach</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L583">adapter/virtual-agv-adapter.ts:583</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Registers a handler that is invoked once by the associated controller
when the adapter should perform deinitializations and disconnect from the
AGV navigation &amp; control interface.</p>
</div><div><p>The handler function may compute final vehicles states and report them
back to the controller after deinitialization is complete through the
callback <code>DetachContext.detached</code>. After this callback is invoked, the
controller won&#39;t invoke any of the other handler functions defined in
this interface.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>context: <a href="../interfaces/DetachContext.html" class="tsd-signature-type" data-tsd-kind="Interface">DetachContext</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="executeAction" class="tsd-anchor"></a><h3>execute<wbr/>Action</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">execute<wbr/>Action<span class="tsd-signature-symbol">(</span>context<span class="tsd-signature-symbol">: </span><a href="../interfaces/ActionContext.html" class="tsd-signature-type" data-tsd-kind="Interface">ActionContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#executeAction">executeAction</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L588">adapter/virtual-agv-adapter.ts:588</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Registers a handler that is invoked by the associated controller whenever
an instant, node, or edge action is to be executed.</p>
</div><div><p>While the action is executed, the callback <code>context.updateActionStatus</code>
must be invoked whenever the action transitions to a new status, passing
in the new action status together with result description and linked
partial state (if applicable).</p>
<p>If the action context of an action specifies <code>true</code> on the <code>stopDriving</code>
property the AGV must stop driving and eventually invoke
<code>controller.updateDrivingState</code> before executing the action; otherwise
the current driving state must be kept.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>For a node or edge action, the initial action status WAITING is
already preset on the controller&#39;s current state. For an instant action,
no action status is preset on the current state. In both cases, the
action handler must initially transition to the action&#39;s initial state,
either INITIALIZING or RUNNING (or PAUSED if pause mode is activated),
FINISHED, or FAILED.</p>
</dd><dt>remarks</dt><dd><p>If pause mode is active, the action to be executed should
transition to PAUSED state (immediately or after initializing/running, if
needed). If pause mode is deactivated, the action should transition to
the previous status again.</p>
</dd><dt>remarks</dt><dd><p>For instant actions &#39;startPause&#39; and &#39;stopPause&#39; this handler
must pause/resume all other actions, and update their action status and
linked state <code>paused</code> accordingly. Node processing of an active order is
suspended and resumed automatically by the AGV controller. Edge traversal
must be suspended and resumed by the AGV adapter.</p>
</dd><dt>remarks</dt><dd><p>Note that the instant actions &#39;stateRequest&#39; and &#39;cancelOrder&#39;
are never dispatched to this handler as they are handled by the AGV
controller itself.</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>context: <a href="../interfaces/ActionContext.html" class="tsd-signature-type" data-tsd-kind="Interface">ActionContext</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="finishEdgeAction" class="tsd-anchor"></a><h3>finish<wbr/>Edge<wbr/>Action</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">finish<wbr/>Edge<wbr/>Action<span class="tsd-signature-symbol">(</span>context<span class="tsd-signature-symbol">: </span><a href="../interfaces/ActionContext.html" class="tsd-signature-type" data-tsd-kind="Interface">ActionContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#finishEdgeAction">finishEdgeAction</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L614">adapter/virtual-agv-adapter.ts:614</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Registers a handler that is invoked by the associated controller whenever
an active edge action (i.e. one with status unequal FINISHED or FAILED)
must be terminated.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>The registered handler is invoked whenever a node is traversed
and any active actions on the edge leading up to that node must be
terminated. The handler should finish or cancel the action and report an
updated action status FINISHED or FAILED via
<code>context.updateActionStatus</code>.</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>context: <a href="../interfaces/ActionContext.html" class="tsd-signature-type" data-tsd-kind="Interface">ActionContext</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a id="getBatteryReach" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagProtected">Protected</span> get<wbr/>Battery<wbr/>Reach</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-protected"><li class="tsd-signature tsd-kind-icon">get<wbr/>Battery<wbr/>Reach<span class="tsd-signature-symbol">(</span>charge<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L1118">adapter/virtual-agv-adapter.ts:1118</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Gets battery reach of vehicle for the given state of charge.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>charge: <span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>battery state of charge (in percent)</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">number</span></h4><div><p>battery reach according to given state of charge</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a id="getNodeActionDuration" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagProtected">Protected</span> get<wbr/>Node<wbr/>Action<wbr/>Duration</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-protected"><li class="tsd-signature tsd-kind-icon">get<wbr/>Node<wbr/>Action<wbr/>Duration<span class="tsd-signature-symbol">(</span>action<span class="tsd-signature-symbol">: </span><a href="../interfaces/Action.html" class="tsd-signature-type" data-tsd-kind="Interface">Action</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L1025">adapter/virtual-agv-adapter.ts:1025</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Gets duration of given action in seconds.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>action: <a href="../interfaces/Action.html" class="tsd-signature-type" data-tsd-kind="Interface">Action</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>an order action</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">number</span></h4><div><p>duration of action (in seconds)</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a id="getTargetSpeed" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagProtected">Protected</span> get<wbr/>Target<wbr/>Speed</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-protected"><li class="tsd-signature tsd-kind-icon">get<wbr/>Target<wbr/>Speed<span class="tsd-signature-symbol">(</span>useMean<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span>, distance<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span>, maxSpeed<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L1054">adapter/virtual-agv-adapter.ts:1054</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Gets target speed of vehicle depending on related adapter options.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>useMean: <span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> = false</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>whether to use the constant mean speed or the random speed
if a driving speed or time distribution has been specified in the adapter
options; otherwise this parameter is ignored</p>
</div></div></li><li><h5>distance: <span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>the target distance to travel; only used if driving time
distribution has been specified in the adapter options</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> maxSpeed: <span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>a speed limit that must not be exceeded (optional, only
used if no driving distribution function has been specified in the
adapter options)</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">number</span></h4><div><p>target speed of vehicle depending on the given parameters and
adapter options</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="isActionExecutable" class="tsd-anchor"></a><h3>is<wbr/>Action<wbr/>Executable</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">is<wbr/>Action<wbr/>Executable<span class="tsd-signature-symbol">(</span>context<span class="tsd-signature-symbol">: </span><a href="../interfaces/ActionContext.html" class="tsd-signature-type" data-tsd-kind="Interface">ActionContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../interfaces/ErrorReference.html" class="tsd-signature-type" data-tsd-kind="Interface">ErrorReference</a><span class="tsd-signature-symbol">[]</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#isActionExecutable">isActionExecutable</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L630">adapter/virtual-agv-adapter.ts:630</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Registers a handler that is invoked by the associated controller to check
synchronously whether a given node, edge, or instant action can be
executed principally.</p>
</div><div><p>The handler function should return a non-empty array of error references
if the action cannot be executed and must be rejected. For example, if an
action cannot be completed because of external factors (e.g. no load at
expected position), or if an action conflicts with the AGV&#39;s currently
active order (e.g. instant action says to lower fork while order says to
raise fork), or if the order contains actions the vehicle cannot perform
(e.g. lifting height higher than maximum lifting height, or lifting
actions although no stroke is installed).</p>
<p>If the action can be executed, the handler should return an empty array
or <code>undefined</code>.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>You should not include the <code>actionId</code> and the <code>actionType</code> as
error references as these are added automatically by the controller. If
the error was caused by erroneous action parameters, include a list of
parameters in the reference.</p>
</dd><dt>remarks</dt><dd><p>If an instant action is not executable in principle it will be
rejected with an error by the AGV controller. If a node or edge action is
not executable in principle, the order will be rejected by the AGV
controller. In the latter case all order node and edge actions are
checked for executability <em>before</em> the order is carried out.</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>context: <a href="../interfaces/ActionContext.html" class="tsd-signature-type" data-tsd-kind="Interface">ActionContext</a></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="../interfaces/ErrorReference.html" class="tsd-signature-type" data-tsd-kind="Interface">ErrorReference</a><span class="tsd-signature-symbol">[]</span></h4><div><p>an array of error references if action cannot be executed; an
empty array or <code>undefined</code> if action can be executed</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="isNodeWithinDeviationRange" class="tsd-anchor"></a><h3>is<wbr/>Node<wbr/>Within<wbr/>Deviation<wbr/>Range</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">is<wbr/>Node<wbr/>Within<wbr/>Deviation<wbr/>Range<span class="tsd-signature-symbol">(</span>node<span class="tsd-signature-symbol">: </span><a href="../interfaces/Node.html" class="tsd-signature-type" data-tsd-kind="Interface">Node</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../interfaces/ErrorReference.html" class="tsd-signature-type" data-tsd-kind="Interface">ErrorReference</a><span class="tsd-signature-symbol">[]</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#isNodeWithinDeviationRange">isNodeWithinDeviationRange</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L652">adapter/virtual-agv-adapter.ts:652</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Registers a handler that is invoked by the associated controller whenever
it needs to check whether a given node&#39;s position is within the allowed
deviation range of the current AGV position.</p>
</div><div><p>The handler function should return an array of error references if the
node is not within the deviation range by checking the node properties x,
y, theta, mapId, allowedDeviationTheta, and allowedDeviationXy against
the current AGV position. Otherwise, the handler should return an empty
array or <code>undefined</code>.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>You should not include the <code>nodeId</code> as error reference as it is
added automatically by the controller. Instead, include all node
property-value pairs that fail the check.</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>node: <a href="../interfaces/Node.html" class="tsd-signature-type" data-tsd-kind="Interface">Node</a></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="../interfaces/ErrorReference.html" class="tsd-signature-type" data-tsd-kind="Interface">ErrorReference</a><span class="tsd-signature-symbol">[]</span></h4><div><p>an array of error references if node is not within deviation
range; an empty array or <code>undefined</code> otherwise</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="isRouteTraversable" class="tsd-anchor"></a><h3>is<wbr/>Route<wbr/>Traversable</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">is<wbr/>Route<wbr/>Traversable<span class="tsd-signature-symbol">(</span>context<span class="tsd-signature-symbol">: </span><a href="../interfaces/RouteTraversableContext.html" class="tsd-signature-type" data-tsd-kind="Interface">RouteTraversableContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../interfaces/ErrorReference.html" class="tsd-signature-type" data-tsd-kind="Interface">ErrorReference</a><span class="tsd-signature-symbol">[]</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#isRouteTraversable">isRouteTraversable</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L681">adapter/virtual-agv-adapter.ts:681</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Registers a handler that is invoked by the associated controller to check
synchronously whether AGV can traverse a given route with regard to
vehicle-specific constraints on node/edge properties that must be
validated by the AGV adapter as the AGV controller is not aware of them.</p>
</div><div><p>The nodes and edges passed to this handler are guaranteed to be
well-formed and valid with respect to the proper sequence of base/horizon
nodes and edges.</p>
<p>Node and edge actions must not be checked by this handler; they are
checked individually by the handler <code>isActionExecutable</code>.</p>
<p>The handler function should return an array of error references if the
route cannot be traversed. For example, if an edge has fields that the
vehicle cannot use (e.g. trajectory) or misses fields it requires (e.g.
nodePosition with mapId for free navigation) or fields it doesn&#39;t support
(e.g. rotationAllowed). Otherwise, the handler should return an empty
array or <code>undefined</code>.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>context: <a href="../interfaces/RouteTraversableContext.html" class="tsd-signature-type" data-tsd-kind="Interface">RouteTraversableContext</a></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="../interfaces/ErrorReference.html" class="tsd-signature-type" data-tsd-kind="Interface">ErrorReference</a><span class="tsd-signature-symbol">[]</span></h4><div><p>an array of error references if route cannot be traversed; an
empty array or <code>undefined</code> otherwise</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a id="startDriving" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagProtected">Protected</span> start<wbr/>Driving</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-protected"><li class="tsd-signature tsd-kind-icon">start<wbr/>Driving<span class="tsd-signature-symbol">(</span>vx<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span>, vy<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span>, reportImmediately<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L995">adapter/virtual-agv-adapter.ts:995</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Vehicle starts driving with the given velocity.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>vx: <span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>velocity in x direction</p>
</div></div></li><li><h5>vy: <span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>velocity in y direction</p>
</div></div></li><li><h5>reportImmediately: <span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> = false</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>true if velocity update should be reported
immediately; false otherwise</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a id="stopDriving" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagProtected">Protected</span> stop<wbr/>Driving</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-protected"><li class="tsd-signature tsd-kind-icon">stop<wbr/>Driving<span class="tsd-signature-symbol">(</span>reportImmediately<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L1010">adapter/virtual-agv-adapter.ts:1010</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Vehicle stops driving.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>reportImmediately: <span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> = false</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>true if velocity update should be reported
immediately; false otherwise</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="stopTraverse" class="tsd-anchor"></a><h3>stop<wbr/>Traverse</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">stop<wbr/>Traverse<span class="tsd-signature-symbol">(</span>context<span class="tsd-signature-symbol">: </span><a href="../interfaces/StopTraverseContext.html" class="tsd-signature-type" data-tsd-kind="Interface">StopTraverseContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#stopTraverse">stopTraverse</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L718">adapter/virtual-agv-adapter.ts:718</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Registers a handler that is invoked by the associated controller whenever
the AGV should stop driving while the active order is being canceled and
after all node/edge actions of this order have already been canceled.</p>
</div><div><p>If the AGV is on a node or can stop if in between nodes, it should stop
gracefully; otherwise it should continue driving to the next node, and
automatically stop on arrival. In this case the <code>traverse</code> handler&#39;s
callback <code>context.edgeTraversed</code> should not be invoked any more (it is
ignored by the AGV controller).</p>
<p>The handler function must invoke the callback <code>context.stopped</code> once as
soon as the AGV has stopped driving, even if the vehicle is already
stopped for another reason. After reporting this state the AGV should be
able to receive a new order. Until this callback has been called it is
guaranteed that no other invocation of this handler occurs.</p>
<p>If the AGV&#39;s capabilities require it to drive to the next node before
stopping, the adapter must invoke both the callback
<code>context.drivingToNextNode</code> immediately and the callback
<code>context.stopped</code> after stopping on arrival.</p>
</div><dl class="tsd-comment-tags"><dt>remarks</dt><dd><p>It is guaranteed that whenever this function is called all
scheduled node and edge actions of the order to be canceled have ended,
i.e. are either in status FINISHED or FAILED.</p>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>context: <a href="../interfaces/StopTraverseContext.html" class="tsd-signature-type" data-tsd-kind="Interface">StopTraverseContext</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="traverseEdge" class="tsd-anchor"></a><h3>traverse<wbr/>Edge</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">traverse<wbr/>Edge<span class="tsd-signature-symbol">(</span>context<span class="tsd-signature-symbol">: </span><a href="../interfaces/TraverseEdgeContext.html" class="tsd-signature-type" data-tsd-kind="Interface">TraverseEdgeContext</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/AgvAdapter.html">AgvAdapter</a>.<a href="../interfaces/AgvAdapter.html#traverseEdge">traverseEdge</a></p><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L714">adapter/virtual-agv-adapter.ts:714</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Traverses the given edge using a basic free navigation algorithm where the
AGV drives with constant speed on a straight line from the edge&#39;s start point
to the edge&#39;s end point. This algorithm ignores obstacle detection and
collision avoidance.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>context: <a href="../interfaces/TraverseEdgeContext.html" class="tsd-signature-type" data-tsd-kind="Interface">TraverseEdgeContext</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a id="updateBatteryState" class="tsd-anchor"></a><h3><span class="tsd-flag ts-flagProtected">Protected</span> update<wbr/>Battery<wbr/>State</h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class tsd-is-protected"><li class="tsd-signature tsd-kind-icon">update<wbr/>Battery<wbr/>State<span class="tsd-signature-symbol">(</span>dx<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span>, dy<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/coatyio/vda-5050-lib.js/blob/45cc428/src/adapter/virtual-agv-adapter.ts#L1103">adapter/virtual-agv-adapter.ts:1103</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Updates battery state of vehicle according to the given travel distance.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>dx: <span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>distance travelled in x direction</p>
</div></div></li><li><h5>dy: <span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>distance travelled in y direction</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../index.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-class"><a href="VirtualAgvAdapter.html" class="tsd-kind-icon">Virtual<wbr/>Agv<wbr/>Adapter</a><ul><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#constructor" class="tsd-kind-icon">constructor</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#debug" class="tsd-kind-icon">debug</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#actionDefinitions" class="tsd-kind-icon">action<wbr/>Definitions</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#apiVersion" class="tsd-kind-icon">api<wbr/>Version</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#controller" class="tsd-kind-icon">controller</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#name" class="tsd-kind-icon">name</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#options" class="tsd-kind-icon">options</a></li><li class="tsd-kind-get-signature tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#vehicleState" class="tsd-kind-icon">vehicle<wbr/>State</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#attach" class="tsd-kind-icon">attach</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#canExecuteOrder" class="tsd-kind-icon">can<wbr/>Execute<wbr/>Order</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#cancelAction" class="tsd-kind-icon">cancel<wbr/>Action</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#detach" class="tsd-kind-icon">detach</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#executeAction" class="tsd-kind-icon">execute<wbr/>Action</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#finishEdgeAction" class="tsd-kind-icon">finish<wbr/>Edge<wbr/>Action</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#getBatteryReach" class="tsd-kind-icon">get<wbr/>Battery<wbr/>Reach</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#getNodeActionDuration" class="tsd-kind-icon">get<wbr/>Node<wbr/>Action<wbr/>Duration</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#getTargetSpeed" class="tsd-kind-icon">get<wbr/>Target<wbr/>Speed</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#isActionExecutable" class="tsd-kind-icon">is<wbr/>Action<wbr/>Executable</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#isNodeWithinDeviationRange" class="tsd-kind-icon">is<wbr/>Node<wbr/>Within<wbr/>Deviation<wbr/>Range</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#isRouteTraversable" class="tsd-kind-icon">is<wbr/>Route<wbr/>Traversable</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#startDriving" class="tsd-kind-icon">start<wbr/>Driving</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#stopDriving" class="tsd-kind-icon">stop<wbr/>Driving</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#stopTraverse" class="tsd-kind-icon">stop<wbr/>Traverse</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="VirtualAgvAdapter.html#traverseEdge" class="tsd-kind-icon">traverse<wbr/>Edge</a></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><a href="VirtualAgvAdapter.html#updateBatteryState" class="tsd-kind-icon">update<wbr/>Battery<wbr/>State</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>